# Refactoring 이란?

- 결과의 변경없이 코드의 구조를 재조정함
- 주로 가독성을 높이고 유지보수를 편하게 한다.
- 버그를 없애거나 새로운 기능을 추가하는 행위는 아님.
- 사용자가 보는 외부 화면은 그대로 두면서 내부 논리나 구조를 바꾸고 개선하는 유지보수 행위

- 코드가 작성된 후에 디자인을 개선하는 작업
- 개발하면서 좋은 디자인을 찾는 것
- method 내 지역 변수와 매개 변수를 주의 깊게 볼 필요가 있다.
- 값이 수정되지 않은 변수는 파라미터로 넘길 수 있다.
- 값이 수정되는 변수는 주의가 필요

### Refactoring은 작은 단계로 나누어 프로그램을 변경한다.

- Naming 중요성, 사람이 이해할 수 있는 코드 작성하기
- 클래스의 method는 클래스의 변수를 사용해야 한다. 클래스의 정보를 사용하고 있지 않다면 사용하고 있는 변수 쪽으로 method를 움직여야 한다.
- 임시 변수는 가능하면 제거하는 것이 좋다. 쓸데없는 많은 파라미터를 만드므로 문제가 되기 때문이다.
- 임시변수를 하나의 메소드를 구현하여 refactoring하기
- refactoring하는 과정에서 알고리즘적으로 성능이 더 안 좋아질 수 있다.
- 하지만 어느 알고리즘 부분이 수정되어야 하는지 명확하게 보이게 되어 최적화하기 더 쉬운 형태로 변경되는 장점이 있다.
- 다른 객체의 속성을 기반으로 한 switch문은 좋지 않다. 그 부분을 함수로 추출하여 자신의 데이터를 사용하는 것으로 refactoring해야 한다.
- 메소드에서 2개의 클래스 변수를 사용하고 있다면 변화하기 쉬운 쪽으로 메소드를 이동시켜 변화의 폭을 최대한 작게 하자
- 기능이 한쪽으로 모여진 클래스를 추상화하여 상속관계로 표현할 수 있다.
- refactoring은 한 번해서 되는 것이 아니고 여러 번의 테스트를 거쳐서 점진적으로 진행된다.



### 리펙토링 원리

- 겉으로 보이는 동작의 변화없이 SW 구조를 바꾸다.
- SW를 보다 쉽게 이해할 수 있고, 적은 비용으로 수정할 수 있도록 겉으로 보이는 동작의 변화없이 내부 구조를 변경하는 것

### 목적

- SW를 보다 이해하기 쉽고, 수정하기 쉽도록 만드는 것
- 겉으로 보이는 SW의 기능을 변경하지 않고 수정



### 왜 리펙토링을 하는가?

- 코드의 디자인을 유지하도록 도와준다.(중복, 유지보수하기 어려운 코드를 개선)
- 중복을 제거함으로써 각각의 작업에 대한 코드가 오직 한 곳에만 있게 할 수 있다.
- SW를 더 이해하기 쉽게 해준다.
- 버그 찾는 것을 도와준다.
- 프로그램을 빨리 작성하도록 도와준다.
- 특정 클래스 내의 메소드가 동작하기 위해 다른 클래스에 있는 정보를 많이 필요로 할 경우 메소드 이동
- 필요 없는 주석 제거 및 너무 긴 메소드, 파라미터
- 종속성 제거
- 코드 가독성 증가, 그만큼 유지보수, 개발 속도가 빨라지기 때문에



### 언제 리펙토링을 해야 하는가?

- 기능을 추가시
- 버그 수정시
- 코드 리뷰시



## Reference

[https://ko.wikipedia.org/wiki/%EB%A6%AC%ED%8C%A9%ED%84%B0%EB%A7%81](https://ko.wikipedia.org/wiki/리팩터링)

https://nesoy.github.io/articles/2018-05/Refactoring